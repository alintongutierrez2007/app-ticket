(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f8d3fac"],{"00f9":function(e,t,a){"use strict";a.r(t);var s=a("8336"),o=a("b0af"),i=a("99d9"),r=a("62ad"),d=a("a523"),n=a("8fea"),l=a("169a"),c=a("0e8f"),u=a("132d"),m=a("a722"),h=a("0fd9"),f=a("b974"),p=a("2fa4"),v=a("8654"),I=a("71d9"),_=a("2a7f"),b=function(){var e=this,t=e._self._c;return t(m["a"],{attrs:{"mt-5":"","align-start":""}},[t(c["a"],{attrs:{"mt-5":""}},[t(n["a"],{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.ArrayUsuarios,search:e.search,"sort-by":"calories"},scopedSlots:e._u([{key:"top",fn:function(){return[t(I["a"],{attrs:{flat:"",color:"white"}},[t(m["a"],{attrs:{row:"","justify-space-between":"","mt-5":""}},[t(c["a"],{attrs:{xs4:"",sm2:"",md2:"",lg2:""}},[t(_["a"],[t(u["a"],{staticClass:"mx-2",attrs:{color:"indigo"}},[e._v("mdi-account-circle")]),e._v(" Usuarios")],1)],1),t(c["a"],{attrs:{xs4:"",sm4:"",md3:"",lg3:""}},[t(v["a"],{attrs:{"justify-center":"","append-icon":"mdi-magnify",label:"Busqueda","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),t(s["a"],{staticClass:"mx-5",attrs:{dark:"",color:"opcion2"},on:{click:function(t){return e.listar()}}},[t(u["a"],[e._v("mdi-autorenew")])],1),t(p["a"]),t(c["a"],{attrs:{xs3:"",sm4:"",md3:"",lg3:""}},[t(l["a"],{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:o}){return[t(s["a"],e._g(e._b({attrs:{color:"opcion4",dark:""}},"v-btn",o,!1),a),[e._v("Nuevo")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(o["a"],[t(I["a"],{staticClass:"text-center",attrs:{flat:"",color:"opcion1"}},[t(_["a"],{staticClass:"white--text text-center"},[e._v(e._s(e.formTitle))]),t(p["a"]),t(s["a"],{attrs:{icon:"",dark:""},on:{click:function(t){e.dialog=!1}}},[t(u["a"],{attrs:{dark:""}},[e._v("mdi-close")])],1)],1),t(i["b"],[t(d["a"],[t(h["a"],[t(r["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(v["a"],{attrs:{label:"Nombre usuario"},model:{value:e.editedItem.nombre_usuario,callback:function(t){e.$set(e.editedItem,"nombre_usuario",t)},expression:"editedItem.nombre_usuario"}})],1),t(r["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(f["a"],{attrs:{items:e.rolesArray,label:"rol"},model:{value:e.editedItem.rol,callback:function(t){e.$set(e.editedItem,"rol",t)},expression:"editedItem.rol"}})],1),t(r["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(v["a"],{attrs:{label:"usr"},model:{value:e.editedItem.usr,callback:function(t){e.$set(e.editedItem,"usr",t)},expression:"editedItem.usr"}})],1),t(r["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[t(v["a"],{attrs:{label:"pwd"},model:{value:e.editedItem.pwd,callback:function(t){e.$set(e.editedItem,"pwd",t)},expression:"editedItem.pwd"}})],1),t(r["a"],{attrs:{cols:"12",sm:"6",md:"4"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.editedItem.estado,expression:"editedItem.estado"}],attrs:{type:"radio"},domProps:{value:1,checked:e._q(e.editedItem.estado,1)},on:{change:function(t){return e.$set(e.editedItem,"estado",1)}}}),e._v(" Activo "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.editedItem.estado,expression:"editedItem.estado"}],attrs:{type:"radio"},domProps:{value:0,checked:e._q(e.editedItem.estado,0)},on:{change:function(t){return e.$set(e.editedItem,"estado",0)}}}),e._v(" Inactivo ")])],1)],1)],1),t(i["a"],[t(p["a"]),t(s["a"],{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Cancelar")]),t(s["a"],{staticClass:"white--text",attrs:{color:"opcion2"},on:{click:e.save}},[e._v("Guardar")])],1)],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.estado",fn:function({item:a}){return[t(u["a"],[e._v(" "+e._s(1==a.estado?"mdi-check":"mdi-alert-circle")+" ")])]}},{key:"item.creado",fn:function({item:a}){return[t("span",[e._v(e._s(e.FormatearFechaHora(a.creado)))])]}},{key:"item.pwd",fn:function({item:a}){return[t(u["a"],[e._v("mdi-key")]),t("span",[e._v(" "+e._s(a.pwd)+" ")])]}},{key:"item.actions",fn:function({item:a}){return[t(u["a"],{staticClass:"mr-2",attrs:{color:"green",small:""},on:{click:function(t){return e.editItem(a)}}},[e._v(" mdi-pencil ")]),t(u["a"],{attrs:{color:"red",small:""},on:{click:function(t){return e.deleteItem(a)}}},[e._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[t(s["a"],{attrs:{color:"primary"},on:{click:function(t){return e.listar()}}},[e._v("Reset")])]},proxy:!0}],null,!0)})],1)],1)},k=[],x=a("cee4"),g=a("2f62"),w={data:()=>({search:"",mensaje:"",ArrayUsuarios:[],rolesArray:[{text:"USER",value:"USER"},{text:"ADMIN",value:"ADMIN"}],dialog:!1,headers:[{text:"Nombre usuario",value:"nombre_usuario"},{text:"Rol",value:"rol"},{text:"Usr",value:"usr"},{text:"Pwd",value:"pwd"},{text:"Activo",value:"estado"},{text:"Creado",value:"creado"},{text:"Acciones",value:"actions",sortable:!1}],desserts:[],editedIndex:-1,editedItem:{nombre_usuario:"",rol:"",usr:"",pwd:"",estado:1},defaultItem:{nombre_usuario:"",rol:"",usr:"",pwd:"",estado:1}}),computed:{...Object(g["c"])(["usuario","token"]),formTitle(){return-1===this.editedIndex?"Nuevo Usuario":"Editar Usuario"}},watch:{dialog(e){e||this.close()}},created(){this.listar()},methods:{...Object(g["b"])(["mostrarLoading","ocultarLoading"]),listar(){let e={headers:{token:this.token}};this.mostrarLoading({titulo:"Accediendo a datos"});let t=this;x["a"].get("usuarios",e).then((function(e){console.log(e),t.ArrayUsuarios=e.data,t.ocultarLoading()})).catch((function(e){console.log(e)}))},editItem(e){this.editedIndex=this.ArrayUsuarios.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem(e){const t=this.ArrayUsuarios.indexOf(e);let a=confirm("Deseas deshabilitar usuario?");if(1==a){let a={headers:{token:this.token}},s=e._id;x["a"].put("usuario/"+s,{_id:e._id,estado:0},a).then(e=>{console.log(e),this.ArrayUsuarios.splice(t,1),this.listar()}).catch(e=>{console.log(e)})}},close(){this.dialog=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},save(){if(this.editedIndex>-1){var e={_id:this.editedItem._id,nombre_usuario:this.editedItem.nombre_usuario,rol:this.editedItem.rol,usr:this.editedItem.usr,pwd:this.editedItem.pwd,estado:this.editedItem.estado};console.log(e);let t={headers:{token:this.token}},a=this.editedItem._id;x["a"].put("usuario/"+a,{_id:this.editedItem._id,nombre_usuario:this.editedItem.nombre_usuario,rol:this.editedItem.rol,usr:this.editedItem.usr,pwd:this.editedItem.pwd,estado:this.editedItem.estado},t).then(e=>{console.log(e),this.listar()}).catch(e=>{console.log(e),this.mensaje=e})}else{let e={headers:{token:this.token}};x["a"].post("nuevo-usuario",{nombre_usuario:this.editedItem.nombre_usuario,rol:this.editedItem.rol,usr:this.editedItem.usr,pwd:this.editedItem.pwd,estado:this.editedItem.estado},e).then(e=>{this.close(),console.log(e),this.listar()}).catch(e=>{console.log(e)})}this.close()},FormatearFechaHora(e){var t=new Date(e).toISOString().substring(0,10),a=e.split("T")[1];return a=a.substring(0,a.length-5),t+" "+a}}},y=w,A=a("2877"),U=Object(A["a"])(y,b,k,!1,null,null,null);t["default"]=U.exports},a722:function(e,t,a){"use strict";a("20f6");var s=a("e8f2");t["a"]=Object(s["a"])("layout")}}]);
//# sourceMappingURL=chunk-5f8d3fac.5de4ff1e.js.map